<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Neighborbrew</title>
  <meta name="description" content="Coffee">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

  <!-- Font Awesome Icons -->
  <script defer src="https://use.fontawesome.com/releases/v5.0.9/js/all.js" integrity="sha384-8iPTk2s/jMVj81dnzb/iFR2sdA7u06vHJyyLlAd4snFpCl/SnyUjRrbdJsw1pGIl" crossorigin="anonymous"></script>

  <!-- UIkit CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.41/css/uikit.min.css" />

  <!-- Custom CSS -->
  <link rel="stylesheet" type="text/css" href="assets/css/app.css">

</head>

<body class="profile-body">
  <div class="uk-container uk-container-small">
    <div class="uk-card uk-card-default uk-card-body">
      <h1> Tell us what you like! </h1>
      <br>
    <form>
      <fieldset class="uk-fieldset">
        <div class="uk-margin">
          You enjoy a good fruity-flavored coffee.
          <select class="uk-select" id="q1">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="uk-margin">
          You prefer sweet over earthy coffee.
          <select class="uk-select" id="q2">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="uk-margin">
          Coffee with floral undetones would be something you might enjoy.
          <select class="uk-select" id="q3">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="uk-margin">
      You like to eat strange and wonderful foods
          <select class="uk-select" id="q4">
            <option value=""></option>
            <option value="1">1 (Strongly Disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (Strongly Agree)</option>
          </select>
        </div>

        <div class="uk-margin">
          Rate your preference on coffee roasts from "light" to "dark".
          <input id="q5" class="uk-range" type="range" value="2" min="0" max="10" step="0.1">
        </div>

        <div class="uk-margin">
      Give us three flavors that intrigue you the most!
          <div class="uk-margin">
            <select class="uk-select" id="q6-1">
              <option> Select flavor profile... </option>
            </select>
          </div>
          <div class="uk-margin">
            <select class="uk-select" id="q6-2">
<option> Select flavor profile... </option>
            </select>
          </div>
          <div class="uk-margin">
            <select class="uk-select" id="q6-3">
<option> Select flavor profile... </option>
            </select>
          </div>

        </div>
        <button type="submit" class="uk-button uk-button-primary" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
       Submit</button>
    </fieldset>
  </form>
  </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>


  <!--Custom JS-->
  <script>

    $("#submit").on("click", function(e){
      e.preventDefault();

      var currentURL = window.location.origin;

      //Get numerical data
      var numScores = [];
      var scoreOne = $("#q1").val()
      var scoreTwo = $("#q2").val()
      var scoreThree = $("#q3").val()
      var scoreFour = $("#q4").val()
      var scoreFive = $("#q5").val()

      numScores.push(scoreOne, scoreTwo, scoreThree, scoreFour, scoreFive);
      console.log(numScores);

      //Get profiles
      var userProfiles = [];
      var profileOne = $("#q6-1").val()
      var profileTwo = $("#q6-2").val()
      var profileThree = $("#q6-3").val()

      var userCoffees = [];
      var userCoffeesTierTwo = [];
      var userCoffeesTierThree = [];

      userProfiles.push(profileOne, profileTwo, profileThree);
      console.log(userProfiles);

      //Get coffees matching profiles
      $.ajax({
            url: currentURL + '/api/coffee',
            method: 'GET'
          })
          .then(function(coffeeData){
            console.log(coffeeData);

            for (var i = 0; i < coffeeData.length; i++){
              if ( coffeeData[i].profile1 === userProfiles[0] ){
                userCoffees.push(coffeeData[i])
                }
              else if ( coffeeData[i].profile2 === userProfiles[0]){
                userCoffees.push(coffeeData[i])
              }
              else if ( coffeeData[i].profile3 === userProfiles[0]){
                userCoffees.push(coffeeData[i])
              }
              else if ( coffeeData[i].profile4 === userProfiles[0]){
                userCoffees.push(coffeeData[i])
              }
            };
            for (var i = 0; i < userCoffees.length; i++){
              if ( userCoffees[i].profile1 === userProfiles[1] ){
                userCoffeesTierTwo.push(userCoffees[i])
                }
              else if ( userCoffees[i].profile2 === userProfiles[1]){
                userCoffeesTierTwo.push(userCoffees[i])
              }
              else if ( userCoffees[i].profile3 === userProfiles[1]){
                userCoffeesTierTwo.push(userCoffees[i])
              }
              else if ( userCoffees[i].profile4 === userProfiles[1]){
                userCoffeesTierTwo.push(userCoffees[i])
              }
            };
            for (var i = 0; i < userCoffeesTierTwo.length; i++){
              if ( userCoffeesTierTwo[i].profile1 === userProfiles[2] ){
                userCoffeesTierThree.push(userCoffeesTierTwo[i])
                }
              else if ( userCoffeesTierTwo[i].profile2 === userProfiles[2]){
                userCoffeesTierThree.push(userCoffeesTierTwo[i])
              }
              else if ( userCoffeesTierTwo[i].profile3 === userProfiles[2]){
                userCoffeesTierThree.push(userCoffeesTierTwo[i])
              }
              else if ( userCoffeesTierTwo[i].profile4 === userProfiles[2]){
                userCoffeesTierThree.push(userCoffeesTierTwo[i])
              }
            };

            console.log('You have ' + userCoffees.length + ' Tier One coffee preferences!')
            console.log('You have ' + userCoffeesTierTwo.length + ' Tier Two coffee preferences!')
            console.log('You have ' + userCoffeesTierThree.length + ' Tier Three coffee preferences!')

          });
      });

      // List coffees

      var profiles =
      [
              "full-bodied",
              "caramel",
              "chocolate",
              "dark chocolate",
              "milk chocolate",
              "earthy",
              "nutty",
              "floral",
              "berry",
              "smoky",
              "spicy",
              "nougat",
              "cocoa",
              "sweet",
              "citrus",
              "raisin",
              "raspberry",
              "toffee",
              "medium-bodied",
              "smooth",
              "maple",
              "rich",
              "blackberry",
              "blueberry",
              "cola",
              "apricot",
              "cherry",
              "strawberry",
              "lemon lime",
              "nectarine",
              "wine",
              "apple",
              "grape",
              "black cherry",
              "herbal",
              "watermelon",
              "brown sugar",
              "vanilla",
              "juicy",
              "green apple",
              "graham cracker",
              "sugar",
              "honey",
              "cookie",
              "toasted spice",
              "molasses",
              "candy",
              "grilled vegetables",
              "assam tea",
              "almond",
              "marzipan",
              "rustic",
              "chamomile",
              "black pepper",
              "toasted marshmallow",
              "dried mango",
              "orange",
              "roasted vegetables",
              "fragrant",
              "lemon",
              "bright",
              "butter",
              "malt",
              "oily",
              "unique",
              "delicate",
              "crisp",
              "complex",
              "kona",
              "delicate",
              "acidic",
              "musty",
              "thick",
              "jasmine",
              "grapefruit",
              "half decaf",
              "snappy",
              "aromatic",
              "dry",
              "wild",
              "thick",
              "elegant",
              "rounded",
              "clean",
              "lively",
              "refreshing",
              "syrup",
              "tangy",
              "intense",
              "red berry",
              "banana",
              "tropical",
              "melon",
              "black tea",
              "plum",
              "tangerine",
              "cacao nibs",
              "balanced",
              "tobacco"
          ]

      for (var i = 0; i < profiles.length; i++){
        $("#q6-1").append('<option>' + profiles[i] + '</option>');
        $("#q6-2").append('<option>' + profiles[i] + '</option>');
        $("#q6-3").append('<option>' + profiles[i] + '</option>');

      }


  </script>
</body>

</html>
